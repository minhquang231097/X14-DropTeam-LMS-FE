import{j as e,a as _,b as M,r as m,B as g,L as O}from"./index-66f4439b.js";import{S as y,h as b}from"./index.esm-585c5a33.js";import{a as c,c as k}from"./customParseFormat-e572864e.js";import{A as B,T as i,I as L}from"./index-b1d286ea.js";import{A as $}from"./AdminSearch-800145d4.js";import{g as P,a as F}from"./coursesList.api-aacf9e29.js";import{L as R}from"./LevelTag-df34ce65.js";import{h as q}from"./http-c5fb7bd7.js";import{u as E}from"./useQuery-ef353a59.js";import{B as K}from"./Breadcrumb-2f9a9b09.js";import{C as Y}from"./index-8ed043f7.js";import{T as N}from"./Table-57a5b6e0.js";import{M as G}from"./index-92de84a7.js";import{n as w}from"./index-b795be15.js";import{E as Q}from"./TextArea-61888de0.js";import{D as V}from"./DeleteOutlined-7a50be62.js";import"./logo-with-shadow-2b5099bc.js";import"./lodash-a94e98cc.js";import"./index-77b0e24c.js";import"./SearchOutlined-0de1a286.js";import"./index-fed2eabd.js";import"./utils-bbe17cbb.js";import"./DownOutlined-69c734f1.js";import"./index-5079de6b.js";import"./PlusOutlined-788f7a4a.js";import"./index-772a2eaf.js";import"./index-345bdbcd.js";c.extend(k);const H=()=>{const d=_(),[p,z]=M(),o=p.get("page")??1,n=p.get("limit")??10,s=p.get("search")??null,j={position:["bottomRight"],current:Number(o),pageSize:Number(n),defaultCurrent:1,defaultPageSize:10,pageSizeOptions:[5,10,20],showSizeChanger:!0,showQuickJumper:!0},[u,I]=m.useState(null),[A,x]=m.useState(!1),[,S]=m.useState(null),{data:l}=E({queryKey:["courses",o,n],queryFn:async()=>(await P(o,n)).data}),{data:a}=E({queryKey:["courses",o,n,s],queryFn:async()=>(await F(o,n,s)).data});m.useEffect(()=>{l&&S(l.data),a&&S(a.data),s||d(`/admin/courses/all?page=${o}&limit=${n}`)},[l,n,d,o,s,a]);const C=t=>{const{current:r,pageSize:h}=t,f=s?`&search=${s}`:"";d(`/admin/courses/all?page=${r}&limit=${h}${f}`)},D=t=>{z({search:t})},v=async()=>{try{await q.delete(`/course/${u==null?void 0:u._id}`),w.success({message:"Delete successful",description:"The course has been deleted successfully"})}catch(t){w.error({message:"Delete failed",description:t.message})}x(!1)},T=[{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Image"}),dataIndex:"image",width:"12.5%",render:t=>e.jsx(L,{src:t.length>0?t:"https://via.placeholder.com/500x250",alt:"Course Image"})},{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Course"}),dataIndex:"course_code",width:"45%",render:(t,r)=>e.jsxs(y,{direction:"vertical",children:[e.jsxs(i.Text,{strong:!0,style:{fontSize:"22px"},children:[t,": ",r.title]}),e.jsxs(i.Text,{children:["Created at: ",c(r.create_at).format("DD/MM/YYYY")]})]}),sorter:(t,r)=>{const h=t.create_at?c(t.create_at):c(""),f=r.create_at?c(r.create_at):c("");return h-f},defaultSortOrder:"descend"},{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Difficulty"}),dataIndex:"level",width:"15%",render:t=>e.jsx(R,{level:t,style:{fontSize:"14px",padding:"4px 8px"}}),filters:[{text:"BEGINNER",value:"BEGINNER"},{text:"INTERMEDIATE",value:"INTERMEDIATE"},{text:"ADVANCED",value:"ADVANCED"}],onFilter:(t,{level:r})=>String(r).indexOf(String(t))===0},{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Action"}),width:"10%",render:t=>e.jsxs(y,{children:[e.jsx(g,{type:"primary",size:"large",onClick:()=>{d(`/admin/courses/show/${t._id}`)},children:e.jsx(Q,{className:"text-white text-[22px]"})}),e.jsx(g,{type:"primary",size:"large",danger:!0,onClick:()=>{I(t),x(!0)},children:e.jsx(V,{className:"text-white text-[22px]"})})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(K,{items:[{title:e.jsx(O,{to:"/admin",children:"Home"})},{title:"Courses"}],style:{padding:"4px",fontSize:"16px"}}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(i.Title,{level:3,className:"mt-0 mx-1",children:"Course List"}),e.jsxs(y,{className:"flex",size:"middle",children:[e.jsx($,{endpoint:"course",keysearch:s??"",onChangeInput:D}),e.jsx(g,{type:"primary",onClick:()=>d("/admin/courses/create"),style:{display:"flex",alignItems:"center",height:"40px",fontSize:"16px"},children:e.jsx(b,{className:"text-[22px]"})})]})]}),l&&!s&&e.jsx(N,{rowKey:t=>t._id,columns:T,dataSource:l.data,pagination:{...j,total:l.total},onChange:C,style:{marginTop:16}}),s&&e.jsx(N,{rowKey:t=>t._id,columns:T,dataSource:a==null?void 0:a.data,pagination:{...j,total:a==null?void 0:a.total},onChange:C,style:{marginTop:16}}),e.jsx(G,{title:"Confirm Delete",onOk:v,okType:"danger",onCancel:()=>x(!1),getContainer:!1,open:A,children:e.jsx(i.Text,{children:"Are you sure you want to delete this course?"})})]})]})},Te=()=>e.jsx(B,{content:e.jsx(H,{})});export{Te as default};
