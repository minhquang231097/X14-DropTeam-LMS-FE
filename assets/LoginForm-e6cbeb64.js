import{a as c,r as u,j as e,L as g,B as p}from"./index-af6f98f4.js";import{h}from"./http-c5fb7bd7.js";import{g as f}from"./userProfile.api-bf751ee9.js";import{m as i}from"./index-30caeb3a.js";import{F as n}from"./index-7c6fd413.js";import{I as m}from"./index-67a3026d.js";import{C as x}from"./index-ef36013b.js";import"./TextArea-a8573295.js";import"./row-a6e6fa3e.js";import"./SearchOutlined-92c31615.js";const j=async(l,s)=>{await h.post("/auth/sign-in",JSON.stringify(l)).then(a=>{if(a&&a.data.id){const t={userId:a.data.id,username:a.data.username,role:a.data.role,accessToken:a.data.accessToken,refreshToken:a.data.refreshToken};localStorage.setItem("login",JSON.stringify(t)),f(a.data.id).then(o=>{const r=o.data.data,d={id:r._id,fullname:r.fullname,email:r.email,phone_number:r.phone_number,username:r.username,role:r.role,dob:r.dob,gender:r.gender,address:r.address,avatar:r.avatar};localStorage.setItem("user",JSON.stringify(d)),s("/",{replace:!0}),s(0)}).catch(o=>{console.log(o),i.error("Something went wrong!")})}a&&a.data.statusCode===404&&i.error("Wrong Email or Password. Please try again!")}).catch(()=>{i.error("Wrong Email or Password. Please try again!")})},F=()=>{const l=c(),[s,a]=u.useState({username:"",password:""});return e.jsx("div",{className:"mt-4",children:e.jsxs(n,{name:"normal_login",className:"w-full",initialValues:{remember:!0},layout:"vertical",children:[e.jsx(n.Item,{name:"username",label:e.jsx("p",{className:"font-bold my-2",children:"Username"}),hasFeedback:!0,rules:[{required:!0,message:"Please input your Usename!"}],children:e.jsx(m,{size:"large",placeholder:"Username address here ...",onChange:t=>{a({...s,username:t.target.value})}})}),e.jsx(n.Item,{name:"password",label:e.jsx("p",{className:"font-bold my-2 text-black",children:"Password"}),rules:[{required:!0,message:"Please input your password!"},{validator(t,o){return!o||o.length>=6?Promise.resolve():Promise.reject(new Error("Please enter password at least 6 characters"))}}],hasFeedback:!0,children:e.jsx(m.Password,{size:"large",type:"password",placeholder:"********",onChange:t=>{a({...s,password:t.target.value})}})}),e.jsxs(n.Item,{children:[e.jsx(n.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(x,{children:e.jsx("span",{className:"text-black",children:"Remember me"})})}),e.jsx(g,{className:"float-right",to:"/forgot-password",children:"Forgot password?"})]}),e.jsx(n.Item,{children:e.jsx(p,{size:"large",type:"primary",htmlType:"submit",className:"w-full",onClick:()=>j(s,l),children:"Login"})})]})})};export{F as default};
