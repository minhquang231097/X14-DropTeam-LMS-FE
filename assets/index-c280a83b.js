import{b0 as b,b1 as j,b2 as w,b3 as G,y as I,r as l,b4 as A,C as D,b5 as v}from"./index-7d110911.js";let r=null,i=e=>e(),g=[],p={};function H(){const{prefixCls:e,getContainer:t,duration:o,rtl:n,maxCount:s,top:a}=p,c=e??v().getPrefixCls("message"),u=(t==null?void 0:t())||document.body;return{prefixCls:c,container:u,duration:o,rtl:n,maxCount:s,top:a}}const N=l.forwardRef((e,t)=>{const o=()=>{const{prefixCls:f,container:d,maxCount:F,duration:M,rtl:O,top:E}=H();return{prefixCls:f,getContainer:()=>d,maxCount:F,duration:M,rtl:O,top:E}},[n,s]=l.useState(o),[a,c]=A(n),u=v(),x=u.getRootPrefixCls(),y=u.getIconPrefixCls(),P=u.getTheme(),m=()=>{s(o)};return l.useEffect(m,[]),l.useImperativeHandle(t,()=>{const f=Object.assign({},a);return Object.keys(f).forEach(d=>{f[d]=function(){return m(),a[d].apply(a,arguments)}}),{instance:f,sync:m}}),l.createElement(D,{prefixCls:x,iconPrefixCls:y,theme:P},c)});function C(){if(!r){const e=document.createDocumentFragment(),t={fragment:e};r=t,i(()=>{G(l.createElement(N,{ref:o=>{const{instance:n,sync:s}=o||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=s,C())})}}),e)});return}r.instance&&(g.forEach(e=>{const{type:t,skipped:o}=e;if(!o)switch(t){case"open":{i(()=>{const n=r.instance.open(Object.assign(Object.assign({},p),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":i(()=>{r==null||r.instance.destroy(e.key)});break;default:i(()=>{var n;const s=(n=r.instance)[t].apply(n,I(e.args));s==null||s.then(e.resolve),e.setCloseFn(s)})}}),g=[])}function R(e){p=Object.assign(Object.assign({},p),e),i(()=>{var t;(t=r==null?void 0:r.sync)===null||t===void 0||t.call(r)})}function S(e){const t=b(o=>{let n;const s={type:"open",config:e,resolve:o,setCloseFn:a=>{n=a}};return g.push(s),()=>{n?i(()=>{n()}):s.skipped=!0}});return C(),t}function $(e,t){const o=b(n=>{let s;const a={type:e,args:t,resolve:n,setCloseFn:c=>{s=c}};return g.push(a),()=>{s?i(()=>{s()}):a.skipped=!0}});return C(),o}function z(e){g.push({type:"destroy",key:e}),C()}const B=["success","info","warning","error","loading"],Q={open:S,destroy:z,config:R,useMessage:j,_InternalPanelDoNotUseOrYouWillBeFired:w},h=Q;B.forEach(e=>{h[e]=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return $(e,o)}});const U=h;export{U as m};
