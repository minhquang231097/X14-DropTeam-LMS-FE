import{a as l,r as m,j as e,B as c,L as p}from"./index-f27754b7.js";import{H as u,F as w}from"./Footer-2987409c.js";import{L as h}from"./logo-with-shadow-2b5099bc.js";import{h as g}from"./http-c5fb7bd7.js";import{F as t}from"./index-6db8f8a8.js";import{I as d}from"./index-124c7d56.js";import"./index.esm-74388d2a.js";import"./TextArea-e14d1cb1.js";import"./lodash-cafbb443.js";import"./useQuery-2ba9aa5a.js";import"./utils-e1464f92.js";import"./Table-53a05175.js";import"./index-a373ded8.js";import"./DownOutlined-33901757.js";import"./SearchOutlined-c5d39dab.js";import"./index-0da9c9cb.js";import"./row-364541ef.js";const P=async(o,s)=>{const n={password:o.currentPassword,newPassword:o.newPassword};return g.put("/user/update/change-password",JSON.stringify(n)).then(r=>{r.data.message==="Success"&&r.data.statusCode===200?(s("/",{replace:!0}),s(0)):r.data.statusCode===404&&alert("Current password is incorrect!")}).catch(r=>{console.log(r)})},x=()=>{const o=l(),[s,n]=m.useState({currentPassword:"",newPassword:""});return e.jsxs(t,{name:"changePassword",initialValues:{remember:!0},layout:"vertical",children:[e.jsx(t.Item,{name:"currentPassword",label:e.jsx("p",{className:"font-bold my-2",children:"Current Password"}),hasFeedback:!0,rules:[{required:!0,message:"Please input your current password!"},{validator(r,a){return!a||a.length>=6?Promise.resolve():Promise.reject(new Error("Please enter password at least 6 characters"))}}],children:e.jsx(d.Password,{size:"large",type:"password",placeholder:"********",onChange:r=>{n({...s,currentPassword:r.target.value})}})}),e.jsx(t.Item,{name:"newPassword",label:e.jsx("p",{className:"font-bold my-2",children:"New Password"}),hasFeedback:!0,rules:[{required:!0,message:"Please input your new password!"},{validator(r,a){return!a||a.length>=6?Promise.resolve():Promise.reject(new Error("Please enter password at least 6 characters"))}}],children:e.jsx(d.Password,{size:"large",type:"password",placeholder:"********",onChange:r=>{n({...s,newPassword:r.target.value})}})}),e.jsx(t.Item,{name:"confirm",dependencies:["newPassword"],hasFeedback:!0,label:e.jsx("p",{className:"my-2 font-bold",children:"Confirm New Password"}),rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:r})=>({validator(a,i){return!i||r("newPassword")===i?Promise.resolve():Promise.reject(new Error("The new password that you entered do not match!"))}})],children:e.jsx(d.Password,{size:"large",placeholder:"********",minLength:6})}),e.jsx(t.Item,{children:e.jsx(c,{size:"large",type:"primary",htmlType:"submit",className:"w-full",onClick:()=>{P(s,o)},children:"Change Password"})})]})},B=()=>e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsx("div",{className:"w-full min-h-screen pt-20 pb-[96px] bg-gradient-to-r from-[#304352] to-[#d7d2cc] dark:bg-gradient-to-r dark:from-[#8360c3] dark:to-[#2ebf91]",children:e.jsxs("div",{className:"bg-white w-[480px] max-md:w-[69%] p-10 pb-6 rounded-lg mx-auto",children:[e.jsx("img",{src:h,alt:"",className:"w-[20%]"}),e.jsx("h1",{children:"Change Password"}),e.jsx(x,{}),"Return to"," ",e.jsx(p,{to:"/",className:"no-underline text-blue-500",children:"Home!"})]})}),e.jsx(w,{})]});export{B as default};
