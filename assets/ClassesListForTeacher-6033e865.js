import{j as e,a as S,r as u,b as f}from"./index-f27754b7.js";import{l as C}from"./lodash-cafbb443.js";import{H as y,F as T}from"./Footer-2987409c.js";import{S as b}from"./SidebarTeacher-f052e64f.js";import{T as o}from"./index-11eb42a4.js";import{T as v}from"./Table-53a05175.js";import{g as w}from"./classesList.api-9ebd59f7.js";import{h as p}from"./http-c5fb7bd7.js";import{u as g}from"./useQuery-2ba9aa5a.js";import{I as F}from"./index-124c7d56.js";import"./logo-with-shadow-2b5099bc.js";import"./index.esm-74388d2a.js";import"./TextArea-e14d1cb1.js";import"./index-4b337459.js";import"./index-a373ded8.js";import"./DownOutlined-33901757.js";import"./SearchOutlined-c5d39dab.js";import"./index-0da9c9cb.js";import"./utils-e1464f92.js";const _=t=>{const m=[{title:"No.",dataIndex:"index",width:"48px",render:(r,a,s)=>e.jsx(e.Fragment,{children:s+1})},{title:"Class Code",dataIndex:"class_code",render:(r,{class_code:a})=>e.jsx(e.Fragment,{children:a||""}),filteredValue:[t.searchText],onFilter:(r,{class_code:a})=>String(a).toLowerCase().includes(String(r).toLowerCase())},{title:"Course",dataIndex:"course",render:(r,{course:a})=>e.jsx(e.Fragment,{children:a&&a.course_code})},{title:"Workplace",dataIndex:"workplace",render:(r,{workplace:a})=>e.jsx(e.Fragment,{children:a&&a.workplace_code})},{title:"Schedule",dataIndex:"schedule",render:(r,{schedule:a})=>e.jsx(e.Fragment,{children:a?[...a].map(s=>{if(s===0)return e.jsx(o,{color:"yellow",children:"Mon"},"active");if(s===1)return e.jsx(o,{color:"pink",children:"Tue"},"active");if(s===2)return e.jsx(o,{color:"green",children:"Wed"},"active");if(s===3)return e.jsx(o,{color:"orange",children:"Thu"},"active");if(s===4)return e.jsx(o,{color:"blue",children:"Fri"},"active");if(s===5)return e.jsx(o,{color:"purple",children:"Sat"},"active");if(s===6)return e.jsx(o,{color:"red",children:"Sun"},"active")}):""})},{title:"Total Students",dataIndex:"class_size",sorter:(r,a)=>r.class_size-a.class_size},{title:"Status",key:"tags",dataIndex:"status",render:(r,{status:a})=>e.jsx(e.Fragment,{children:a==="ACTIVE"&&e.jsx(o,{color:"green",children:a.toUpperCase()},"active")||a==="INACTIVE"&&e.jsx(o,{color:"volcano",children:a.toUpperCase()},"inactive")||e.jsx(o,{color:"geekblue",children:"NO STATUS".toUpperCase()},"active")})}];let c=[];const l=S();t.data!==void 0&&(c=t.searchText?t.filteredData.data:t.data.data);const d=(r,a,s,h)=>{const{current:i,pageSize:x}=r;t.setSearchParams(i),l(`/teacher/classes-list?page=${i}&limit=${x}`)};return e.jsx(v,{pagination:{position:["bottomCenter"],defaultCurrent:1,defaultPageSize:10,pageSizeOptions:[10,20],showSizeChanger:!0,current:t.data&&t.data.page,total:t.data&&(t.searchText?t.filteredData.count:t.data.total)},columns:m,dataSource:c,scroll:{y:340},bordered:!0,size:"small",rowKey:({_id:r})=>r,style:{padding:"0 16px"},onChange:d,onRow:({_id:r})=>({onClick:()=>{l(`/teacher/class-detail?id=${r}&page=1&limit=10`)}})})},I=async t=>p.get("/class",{params:{search:t}}),N=async()=>p.get("/class/mentor/all"),Q=()=>{const[t,m]=u.useState(""),[c,l]=u.useState({}),[d,r]=f(),a=d.get("page")??1,s=d.get("limit")??10,h=JSON.parse(localStorage.getItem("user")||"{}").role,{data:i}=g({queryKey:["classes",a,s],queryFn:async()=>(h==="MENTOR"?await N():await w(a,s)).data});g({queryKey:["search",t],queryFn:async()=>{const n=await I(String(t).toUpperCase());l(n.data)}}).data;const x=n=>{m(n)},j=C.debounce(n=>{x(n.target.value)},1e3);return e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs("div",{className:"max-w-[1280px] mx-auto py-8 grid grid-cols-7 grid-rows-auto gap-4",children:[e.jsx(b,{}),e.jsxs("div",{className:"col-span-6 row-span-4 bg-white dark:bg-[#1E293B] dark:border-none rounded-lg border-[1px] border-solid border-gray-200 overflow-hidden",style:{boxShadow:"0 0 10px rgba(0,0,0,.18)",cursor:"pointer",border:"1px solid rgba(0,0,0,.1)"},children:[e.jsxs("div",{className:"p-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xl text-[#F56A00] font-bold",children:"Classes List For Teacher"}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Total classes:"," ",e.jsx("span",{className:"text-blue-600",children:i&&(t?c.count:i.total)})]})]}),e.jsx(F.Search,{placeholder:"Search Class Code ...",style:{width:280},onChange:j,onSearch:x})]}),e.jsx(_,{data:i,searchText:t,setSearchParams:r,filteredData:c})]})]}),e.jsx(T,{})]})};export{Q as default};
