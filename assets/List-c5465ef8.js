import{j as e,a as _,b as M,r as m,B as g,L as O}from"./index-363e3ed7.js";import{S as y,h as b}from"./index.esm-6c83b20a.js";import{a as c,c as k}from"./customParseFormat-8151b72c.js";import{A as B,T as i,I as L}from"./index-bf24e54d.js";import{A as $}from"./AdminSearch-8fa5e6c8.js";import{g as P,a as F}from"./coursesList.api-347599cc.js";import{L as R}from"./LevelTag-69c1d224.js";import{h as q}from"./http-f102274f.js";import{u as E}from"./useQuery-6d2d25c4.js";import{B as K}from"./Breadcrumb-43c879c8.js";import{C as Y}from"./index-b91b8127.js";import{T as N}from"./Table-859056a2.js";import{M as G}from"./index-6b70fdcd.js";import{n as w}from"./index-0a87366a.js";import{E as Q}from"./TextArea-bdb83b3b.js";import{D as V}from"./DeleteOutlined-5307a706.js";import"./logo-with-shadow-ac30bca6.js";import"./lodash-056257d6.js";import"./index-a07bd811.js";import"./SearchOutlined-c83a2012.js";import"./index-76551327.js";import"./utils-dec5ad5f.js";import"./DownOutlined-860a4c38.js";import"./index-25cd65cf.js";import"./PlusOutlined-b3cabe21.js";import"./index-8484ea22.js";import"./index-ad79b64d.js";c.extend(k);const H=()=>{const d=_(),[p,z]=M(),o=p.get("page")??1,n=p.get("limit")??10,s=p.get("search")??null,j={position:["bottomRight"],current:Number(o),pageSize:Number(n),defaultCurrent:1,defaultPageSize:10,pageSizeOptions:[5,10,20],showSizeChanger:!0,showQuickJumper:!0},[u,I]=m.useState(null),[A,x]=m.useState(!1),[,S]=m.useState(null),{data:l}=E({queryKey:["courses",o,n],queryFn:async()=>(await P(o,n)).data}),{data:a}=E({queryKey:["courses",o,n,s],queryFn:async()=>(await F(o,n,s)).data});m.useEffect(()=>{l&&S(l.data),a&&S(a.data),s||d(`/admin/courses/all?page=${o}&limit=${n}`)},[l,n,d,o,s,a]);const C=t=>{const{current:r,pageSize:h}=t,f=s?`&search=${s}`:"";d(`/admin/courses/all?page=${r}&limit=${h}${f}`)},D=t=>{z({search:t})},v=async()=>{try{await q.delete(`/course/${u==null?void 0:u._id}`),w.success({message:"Delete successful",description:"The course has been deleted successfully"})}catch(t){w.error({message:"Delete failed",description:t.message})}x(!1)},T=[{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Image"}),dataIndex:"image",width:"12.5%",render:t=>e.jsx(L,{src:t.length>0?t:"https://via.placeholder.com/500x250",alt:"Course Image"})},{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Course"}),dataIndex:"course_code",width:"45%",render:(t,r)=>e.jsxs(y,{direction:"vertical",children:[e.jsxs(i.Text,{strong:!0,style:{fontSize:"22px"},children:[t,": ",r.title]}),e.jsxs(i.Text,{children:["Created at: ",c(r.create_at).format("DD/MM/YYYY")]})]}),sorter:(t,r)=>{const h=t.create_at?c(t.create_at):c(""),f=r.create_at?c(r.create_at):c("");return h-f},defaultSortOrder:"descend"},{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Difficulty"}),dataIndex:"level",width:"15%",render:t=>e.jsx(R,{level:t,style:{fontSize:"14px",padding:"4px 8px"}}),filters:[{text:"BEGINNER",value:"BEGINNER"},{text:"INTERMEDIATE",value:"INTERMEDIATE"},{text:"ADVANCED",value:"ADVANCED"}],onFilter:(t,{level:r})=>String(r).indexOf(String(t))===0},{title:e.jsx(i.Text,{style:{fontSize:"18px"},children:"Action"}),width:"10%",render:t=>e.jsxs(y,{children:[e.jsx(g,{type:"primary",size:"large",onClick:()=>{d(`/admin/courses/show/${t._id}`)},children:e.jsx(Q,{className:"text-white text-[22px]"})}),e.jsx(g,{type:"primary",size:"large",danger:!0,onClick:()=>{I(t),x(!0)},children:e.jsx(V,{className:"text-white text-[22px]"})})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(K,{items:[{title:e.jsx(O,{to:"/admin",children:"Home"})},{title:"Courses"}],style:{padding:"4px",fontSize:"16px"}}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(i.Title,{level:3,className:"mt-0 mx-1",children:"Course List"}),e.jsxs(y,{className:"flex",size:"middle",children:[e.jsx($,{endpoint:"course",keysearch:s??"",onChangeInput:D}),e.jsx(g,{type:"primary",onClick:()=>d("/admin/courses/create"),style:{display:"flex",alignItems:"center",height:"40px",fontSize:"16px"},children:e.jsx(b,{className:"text-[22px]"})})]})]}),l&&!s&&e.jsx(N,{rowKey:t=>t._id,columns:T,dataSource:l.data,pagination:{...j,total:l.total},onChange:C,style:{marginTop:16}}),s&&e.jsx(N,{rowKey:t=>t._id,columns:T,dataSource:a==null?void 0:a.data,pagination:{...j,total:a==null?void 0:a.total},onChange:C,style:{marginTop:16}}),e.jsx(G,{title:"Confirm Delete",onOk:v,okType:"danger",onCancel:()=>x(!1),getContainer:!1,open:A,children:e.jsx(i.Text,{children:"Are you sure you want to delete this course?"})})]})]})},Te=()=>e.jsx(B,{content:e.jsx(H,{})});export{Te as default};
