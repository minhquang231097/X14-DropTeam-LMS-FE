import{j as e,a1 as M,a as D,b as Y,r as N,L as x,B as f}from"./index-66f4439b.js";import{a as d,c as B}from"./customParseFormat-e572864e.js";import{A as L,T as j}from"./index-b1d286ea.js";import{h as O}from"./http-c5fb7bd7.js";import{g as A}from"./class.api-5ed7f295.js";import{s as R,g as W}from"./searchWorkplaceForAdmin-4da33f71.js";import{g as K}from"./coursesList.api-aacf9e29.js";import{F as a}from"./index-d0df1089.js";import{u as U}from"./useMutation-24a2a0cd.js";import{u as i}from"./useQuery-ef353a59.js";import{B as z}from"./Breadcrumb-2f9a9b09.js";import{C as $}from"./index-8ed043f7.js";import{R as H,C as g}from"./row-afd6c259.js";import{S as r}from"./index-772a2eaf.js";import{D as b}from"./index-f1836297.js";import{I as w}from"./index-3d9a0298.js";import{S as Q}from"./index.esm-585c5a33.js";import{n as C}from"./index-b795be15.js";import"./logo-with-shadow-2b5099bc.js";import"./TextArea-61888de0.js";import"./utils-bbe17cbb.js";import"./DownOutlined-69c734f1.js";import"./index-5079de6b.js";import"./PlusOutlined-788f7a4a.js";import"./SearchOutlined-0de1a286.js";d.extend(B);const V=()=>{var p,h,y;const[m]=a.useForm(),{id:l}=M(),u=D(),[c]=Y(),n=c.get("page")??1,o=c.get("limit")??50,v=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],[S,_]=N.useState([]),q=s=>{_(s)},F=async s=>{if(!l)throw new Error("Missing id parameter");await O.put(`/class/${l}`,s)},{mutate:I,isLoading:P}=U(F,{onSuccess:()=>{C.success({message:"Update successful",description:"The class has been updated successfully"}),m.resetFields(),u("/admin/classes/all")},onError:s=>{C.error({message:"Update failed",description:s.message})}}),{data:t}=i({queryKey:["classes"],queryFn:async()=>(await A(l)).data.data}),{data:T}=i({queryKey:["courses",n,o],queryFn:async()=>(await K(n,o)).data.data}),{data:k}=i({queryKey:["workplaces"],queryFn:async()=>(await R("ON")).data.data}),{data:E}=i({queryKey:["MENTOR",n,o],queryFn:async()=>(await W("MENTOR",n,o)).data.data});return t?e.jsxs(e.Fragment,{children:[e.jsx(z,{items:[{title:e.jsx(x,{to:"/admin",children:"Home"})},{title:e.jsx(x,{to:"/admin/classes/all",children:"Classes"})},{title:`${t.class_code}`}],style:{padding:"4px",fontSize:"16px"}}),e.jsx($,{children:e.jsxs(a,{form:m,onFinish:I,layout:"vertical",initialValues:{...t,mentor_id:(p=t.mentor)==null?void 0:p.fullname,workplace_id:(h=t.workplace)==null?void 0:h.name,course_id:(y=t.course)==null?void 0:y.title,start_at:d(t.create_at).startOf("day"),end_at:d(t.end_at).endOf("day")},children:[e.jsx(j.Title,{level:3,className:"mt-0 mx-1",children:"Edit The Class"}),e.jsxs(H,{gutter:[24,16],children:[e.jsxs(g,{xs:24,lg:12,children:[e.jsx(a.Item,{label:"Course",name:"course_id",rules:[{required:!0,message:"Please enter the course name"}],children:e.jsx(r,{options:(T||[]).map(s=>({value:s._id,label:s.title})),showSearch:!0})}),e.jsx(a.Item,{label:"Mentor",name:"mentor_id",rules:[{required:!0,message:"Please enter the mentor"}],children:e.jsx(r,{options:(E||[]).map(s=>({value:s._id,label:s.fullname})),showSearch:!0})}),e.jsx(a.Item,{label:"Start Date",name:"start_at",rules:[{required:!0,message:"Please enter the start date"}],children:e.jsx(b,{style:{width:"100%"},format:"DD/MM/YYYY"})}),e.jsx(a.Item,{label:"Total Sessions",name:"total_session",rules:[{required:!0,message:"Please enter the total sessions"}],children:e.jsx(w,{style:{width:"100%"}})})]}),e.jsxs(g,{xs:24,lg:12,children:[e.jsx(a.Item,{label:"Facility",name:"workplace_id",rules:[{required:!0,message:"Please enter the facility"}],children:e.jsx(r,{options:(k||[]).map(s=>({value:s._id,label:s.name})),showSearch:!0})}),e.jsx(a.Item,{label:"Schedule",name:"schedule",rules:[{required:!0,message:"Please enter the schedule"}],children:e.jsx(r,{mode:"multiple",placeholder:"Select weekdays",value:S,onChange:q,maxTagCount:"responsive",children:v.map(s=>e.jsx(r.Option,{value:s.value,children:s.label},s.value))})}),e.jsx(a.Item,{label:"Expected End Date",name:"end_at",rules:[{required:!0,message:"Please enter the expected end date"}],children:e.jsx(b,{style:{width:"100%"},format:"DD/MM/YYYY"})}),e.jsx(a.Item,{label:"Number of Students",name:"class_size",rules:[{required:!0,message:"Please enter the number of students"}],children:e.jsx(w,{style:{width:"100%"}})})]})]}),e.jsx(a.Item,{children:e.jsxs(Q,{size:"middle",style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(f,{type:"default",onClick:()=>u(`/admin/classes/show/${l}`),children:"Cancel"}),e.jsx(f,{type:"primary",htmlType:"submit",loading:P,children:"Update"})]})})]})})]}):e.jsx(j.Text,{children:"Class not found"})},we=()=>e.jsx(L,{content:e.jsx(V,{})});export{we as default};
