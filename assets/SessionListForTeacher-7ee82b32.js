import{j as e,a as y,r as g,b as f,B as N}from"./index-363e3ed7.js";import{H as b,F as v}from"./Footer-77e907dd.js";import{S as C}from"./SidebarTeacher-788f93fe.js";import{T as u}from"./index-76551327.js";import{T as w}from"./Table-859056a2.js";import{h as j}from"./http-f102274f.js";import{g as T}from"./class.api-b2bb7146.js";import{u as h}from"./useQuery-6d2d25c4.js";import{I as D}from"./index-a07bd811.js";import"./logo-with-shadow-ac30bca6.js";import"./index.esm-6c83b20a.js";import"./TextArea-bdb83b3b.js";import"./lodash-056257d6.js";import"./index-45733f17.js";import"./index-8484ea22.js";import"./DownOutlined-860a4c38.js";import"./SearchOutlined-c83a2012.js";import"./index-ad79b64d.js";import"./utils-dec5ad5f.js";const _=t=>{const c=[{title:"No.",dataIndex:"index",width:"48px",render:(i,a,d)=>e.jsx(e.Fragment,{children:d+1})},{title:"Session Code",dataIndex:"session_code",width:"160px",filteredValue:[t.searchText],onFilter:(i,{session_code:a})=>String(a).toLowerCase().includes(String(i).toLowerCase())},{title:"Description",dataIndex:"desc"},{title:"Status",key:"tags",dataIndex:"status",width:"160px",render:(i,{status:a})=>e.jsx(e.Fragment,{children:a==="completed"&&e.jsx(u,{color:"green",children:a.toUpperCase()},"active")||a==="completed"&&e.jsx(u,{color:"volcano",children:a.toUpperCase()},"inactive")||e.jsx(u,{color:"geekblue",children:"NO STATUS".toUpperCase()},"active")}),filters:[{text:"COMPLETED",value:"completed"},{text:"UNCOMPLETED",value:"uncompleted"}],onFilter:(i,{status:a})=>String(a).indexOf(String(i))===0}];let l=[];const m=y();t.data!==void 0&&(l=t.searchText?t.filteredData.data:t.data.data);const x=(i,a,d,p)=>{const{current:n,pageSize:o}=i;t.setSearchParams(n),m(`/teacher/class-detail?id=${t.classId}&page=${n}&limit=${o}`)};return e.jsx(w,{pagination:{position:["bottomCenter"],defaultCurrent:1,defaultPageSize:10,pageSizeOptions:[10,20],showSizeChanger:!0,current:t.data&&t.data.page,total:t.data&&(t.searchText?t.filteredData.count:t.data.total)},columns:c,dataSource:l,scroll:{y:340},bordered:!0,size:"small",style:{padding:"0 16px"},onChange:x,onRow:({_id:i,session_code:a})=>({onClick:()=>{m(`/teacher/class-detail/session?session_code=${a}&session_id=${i}&class_id=${t.classId}&page=1&limit=10`)}})})},F=async(t,c,l)=>j.get("/session",{params:{class_id:t,page:c,limit:l}}),I=async t=>j.get("/session",{params:{search:t}}),G=()=>{const[t,c]=g.useState(""),[l,m]=g.useState({}),x=y(),[i,a]=f(),d=i.get("page")??"1",p=i.get("limit")??"10",n=i.get("id")??"",{data:o}=h({queryKey:["sessions",n,d,p],queryFn:async()=>(await F(n,d)).data}),r=h({queryKey:["class",n],queryFn:async()=>(await T(n)).data.data}).data;h({queryKey:["search",t],queryFn:async()=>{const s=await I(String(t).toUpperCase());m(s.data)}}).data;const S=s=>{c(s)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsxs("div",{className:"max-w-[1280px] mx-auto py-8 grid grid-cols-7 gap-4",children:[e.jsx(C,{}),e.jsxs("div",{className:"col-span-6 row-span-4 bg-white dark:bg-[#1E293B] dark:border-none rounded-lg border-[1px] border-solid border-gray-200 overflow-hidden",style:{boxShadow:"0 0 10px rgba(0,0,0,.18)",cursor:"pointer",border:"1px solid rgba(0,0,0,.1)"},children:[e.jsxs("div",{className:"p-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xl text-[#F56A00] font-bold",children:r?`Class Code: ${r.class_code}`:"Class Name"}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Total sessions:"," ",e.jsx("span",{className:"text-blue-600",children:o&&(t?l.count:o.total)})]}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Course: ",e.jsx("span",{className:"text-blue-600",children:r?r.course.course_code:""})]}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2 flex",children:["Schedule:"," ",e.jsx("span",{className:"text-blue-600 flex",children:r&&r.schedule?[...r.schedule].map(s=>{if(s===0)return e.jsx("span",{className:"ml-2 text-yellow-500",children:"Monday"});if(s===1)return e.jsx("div",{className:"ml-2 text-pink-500",children:"Tuesday"});if(s===2)return e.jsx("div",{className:"ml-2 text-green-500",children:"Wednesday"});if(s===3)return e.jsx("div",{className:"ml-2 text-orange-500",children:"Thursday"});if(s===4)return e.jsx("div",{className:"ml-2 text-blue-500",children:"Friday"});if(s===5)return e.jsx("div",{className:"ml-2 text-purple-500",children:"Saturday"});if(s===6)return e.jsx("div",{className:"ml-2 text-red-500",children:"Sunday"})}):"undefined"})]}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Workplace: ",e.jsx("span",{className:"text-blue-600",children:r?r.workplace.name:""})]}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Start at:"," ",e.jsx("span",{className:"text-blue-600",children:r?new Date(r.start_at).toLocaleDateString("vi-VN"):"DD/MM/YYYY"})]}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Expected end at:"," ",e.jsx("span",{className:"text-blue-600",children:r?new Date(r.end_at).toLocaleDateString("vi-VN"):"DD/MM/YYYY"})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(D.Search,{placeholder:"Search Session Code ...",style:{width:280},onChange:s=>c(s.target.value),onSearch:S}),e.jsx(N,{className:"mt-4",type:"primary",onClick:()=>x(`/teacher/lessons-list?course_id=${r.course._id}&page=1&limit=10`),children:"Lesson List"})]})]}),e.jsx(_,{data:o,searchText:t,setSearchParams:a,classId:n,filteredData:l})]})]}),e.jsx(v,{})]})};export{G as default};
