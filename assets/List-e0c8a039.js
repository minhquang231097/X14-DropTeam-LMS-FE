import{j as e,a as b,b as A,r as h,B as j,L as D}from"./index-f27754b7.js";import{a as o,c as F}from"./customParseFormat-ea496d08.js";import{S as p,h as P}from"./index.esm-74388d2a.js";import{A as $,T as s,I as E}from"./index-fd00c37f.js";import{A as B}from"./AdminSearch-289065a3.js";import{g as L,a as q}from"./classesList.api-9ebd59f7.js";import{w as K}from"./day-4b2aa78a.js";import{h as G}from"./http-c5fb7bd7.js";import{S as Q}from"./StatusTag-8611cb74.js";import{u as z}from"./useQuery-2ba9aa5a.js";import{B as R}from"./Breadcrumb-930b3c52.js";import{C as U}from"./index-54e4328c.js";import{T as I}from"./Table-53a05175.js";import{M as V}from"./index-b6514c61.js";import{n as N}from"./index-0cc4f263.js";import{E as H}from"./TextArea-e14d1cb1.js";import{D as J}from"./DeleteOutlined-978bf3e9.js";import"./logo-with-shadow-2b5099bc.js";import"./lodash-cafbb443.js";import"./index-124c7d56.js";import"./SearchOutlined-c5d39dab.js";import"./index-11eb42a4.js";import"./utils-e1464f92.js";import"./DownOutlined-33901757.js";import"./index-0e55054a.js";import"./PlusOutlined-f79b1ed8.js";import"./index-a373ded8.js";import"./index-0da9c9cb.js";o.extend(F);const W=()=>{const x=b(),[f,M]=A(),c=f.get("page")??1,d=f.get("limit")??10,i=f.get("search")??null,S={position:["bottomRight"],current:Number(c),pageSize:Number(d),defaultCurrent:1,defaultPageSize:10,pageSizeOptions:[5,10,20],showSizeChanger:!0,showQuickJumper:!0},[y,O]=h.useState(null),[_,g]=h.useState(!1),[,T]=h.useState(null),{data:m}=z({queryKey:["classes",c,d],queryFn:async()=>(await L(c,d)).data}),{data:n}=z({queryKey:["classes",c,d,i],queryFn:async()=>(await q(c,d,i)).data});h.useEffect(()=>{m&&T(m),n&&T(n.data),i||x(`/admin/classes/all?page=${c}&limit=${d}`)},[m,d,x,c,i,n]);const w=t=>{const{current:a,pageSize:r}=t,l=i?`&search=${i}`:"";x(`/admin/classes/all?page=${a}&limit=${r}${l}`)},k=t=>{M({search:t})},Y=async()=>{try{await G.delete(`/class/${y==null?void 0:y._id}`),N.success({message:"Delete successful",description:"The class has been deleted successfully"})}catch(t){N.error({message:"Delete failed",description:t.message})}g(!1)},C=[{title:e.jsx(s.Text,{style:{fontSize:"18px"},children:"Image"}),dataIndex:"image_url",width:"12.5%",render:()=>e.jsx(E,{src:"https://res.cloudinary.com/dar4pvqx2/image/upload/v1693931926/vitebanner_wtcoum.jpg",alt:"Class Image"})},{title:e.jsx(s.Text,{style:{fontSize:"18px"},children:"Class"}),dataIndex:"class_code",width:"25%",render:(t,a)=>{var r;return e.jsxs(p,{direction:"vertical",children:[e.jsx(s.Text,{strong:!0,style:{fontSize:"22px"},children:t}),e.jsx(s.Text,{strong:!0,children:(r=a.course)==null?void 0:r.title}),e.jsxs(s.Text,{children:["Created at: ",o(a.create_at).format("DD/MM/YYYY")]})]})},sorter:(t,a)=>{const r=t.create_at?o(t.create_at):o(""),l=a.create_at?o(a.create_at):o("");return r-l},defaultSortOrder:"descend"},{title:e.jsx(s.Text,{style:{fontSize:"18px"},children:"Schedule"}),dataIndex:"schedule",width:"20%",render:(t,a)=>e.jsxs(p,{direction:"vertical",children:[e.jsxs(s.Text,{children:["Time: ",o(a.start_at).format("DD/MM/YYYY")," - ",o(a.end_at).format("DD/MM/YYYY")]}),e.jsxs(s.Text,{children:["Schedule:"," ",t.map(r=>{const l=K.find(u=>u.value===r);return l?l.label:""}).join(", ")]})]}),filters:[{value:0,text:"Sunday"},{value:1,text:"Monday"},{value:2,text:"Tuesday"},{value:3,text:"Wednesday"},{value:4,text:"Thursday"},{value:5,text:"Friday"},{value:6,text:"Saturday"}],onFilter:(t,{schedule:a})=>String(a).indexOf(String(t))===0},{title:e.jsx(s.Text,{style:{fontSize:"18px"},children:"Facility"}),width:"15%",render:t=>{var a;return e.jsx(p,{direction:"vertical",children:e.jsx(s.Text,{children:(a=t.workplace)==null?void 0:a.name})})},sorter:(t,a)=>{var u,v;const r=((u=t.workplace)==null?void 0:u.name)||"",l=((v=a.workplace)==null?void 0:v.name)||"";return r.length-l.length}},{title:e.jsx(s.Text,{style:{fontSize:"18px"},children:"Status"}),dataIndex:"status",width:"15%",render:t=>t?e.jsx(Q,{status:t,style:{fontSize:"14px",padding:"4px 8px"}}):e.jsx("span",{}),filters:[{text:"ACTIVE",value:"ON"},{text:"INACTIVE",value:"OFF"},{text:"UPCOMING",value:"UPCOMING"}],onFilter:(t,{status:a})=>String(a).indexOf(String(t))===0},{title:e.jsx(s.Text,{style:{fontSize:"18px"},children:"Action"}),width:"10%",render:t=>e.jsxs(p,{children:[e.jsx(j,{type:"primary",size:"large",onClick:()=>{x(`/admin/classes/show/${t._id}`)},children:e.jsx(H,{className:"text-white text-[22px]"})}),e.jsx(j,{type:"primary",size:"large",danger:!0,onClick:()=>{O(t),g(!0)},children:e.jsx(J,{className:"text-white text-[22px]"})})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(R,{items:[{title:e.jsx(D,{to:"/admin",children:"Home"})},{title:"Class"}],style:{padding:"4px",fontSize:"16px"}}),e.jsxs(U,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(s.Title,{level:3,className:"mt-0 mx-1",children:"Class List"}),e.jsxs(p,{className:"flex",size:"middle",children:[e.jsx(B,{endpoint:"class",keysearch:i??"",onChangeInput:k}),e.jsx(j,{type:"primary",onClick:()=>x("/admin/classes/create"),style:{display:"flex",alignItems:"center",height:"40px",fontSize:"16px"},children:e.jsx(P,{className:"text-[22px]"})})]})]}),m&&!i&&e.jsx(I,{rowKey:t=>t._id,columns:C,dataSource:m.data,pagination:{...S,total:m.total},onChange:w,style:{marginTop:16}}),i&&e.jsx(I,{rowKey:t=>t._id,columns:C,dataSource:n==null?void 0:n.data,pagination:{...S,total:n==null?void 0:n.total},onChange:w,style:{marginTop:16}})]}),e.jsx(V,{title:"Confirm Delete",onOk:Y,okType:"danger",onCancel:()=>g(!1),getContainer:!1,open:_,children:e.jsx(s.Text,{children:"Are you sure you want to delete this class?"})})]})},Ie=()=>e.jsx($,{content:e.jsx(W,{})});export{Ie as default};
