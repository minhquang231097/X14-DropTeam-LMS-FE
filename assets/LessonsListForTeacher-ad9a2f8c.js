import{a as j,j as e,r as p,b as y}from"./index-7d110911.js";import{l as S}from"./lodash-f8344649.js";import{H as b,F as w}from"./Footer-f49dd2ec.js";import{S as v}from"./SidebarTeacher-7a1c2c53.js";import{T as h}from"./index-38d7445f.js";import{T}from"./Table-26b9572d.js";import{g as C}from"./lessonsList.api-a0ae6b1b.js";import{h as L}from"./http-f102274f.js";import{g as N}from"./course.api-4e1b7d81.js";import{u}from"./useQuery-82c71c59.js";import{I as F}from"./index-2b0edacf.js";import"./logo-with-shadow-7c6876ad.js";import"./index.esm-72942c3c.js";import"./TextArea-c3291115.js";import"./index-c7ec5fc2.js";import"./index-15436649.js";import"./DownOutlined-64c7721a.js";import"./SearchOutlined-ad45125c.js";import"./index-77d3d9c6.js";import"./utils-fa248f50.js";const _=t=>{const m=j(),d=[{title:"No.",dataIndex:"index",width:"48px",render:(s,a,i)=>e.jsx(e.Fragment,{children:i+1})},{title:"Lesson Name",dataIndex:"title",width:"200px",filteredValue:[t.searchText],onFilter:(s,{title:a})=>String(a).toLowerCase().includes(String(s).toLowerCase())},{title:"Description",dataIndex:"content",render:(s,{content:a})=>e.jsx("div",{className:"whitespace-nowrap overflow-hidden text-ellipsis ",children:a})},{title:"Status",key:"tags",width:"160px",dataIndex:"status",render:(s,{status:a})=>e.jsx(e.Fragment,{children:a==="active"&&e.jsx(h,{color:"green",children:a.toUpperCase()},"active")||a==="inactive"&&e.jsx(h,{color:"volcano",children:a.toUpperCase()},"inactive")||e.jsx(h,{color:"geekblue",children:"NO STATUS".toUpperCase()},"undefined")})}];let l=[];t.data!==void 0&&(l=t.searchText?t.filteredData.data:t.data.data);const n=(s,a,i,x)=>{const{current:o,pageSize:c}=s;t.setSearchParams(o),m(`/teacher/lessons-list?course_id=${t.course_id}&page=${o}&limit=${c}`)};return e.jsx(T,{pagination:{position:["bottomCenter"],defaultCurrent:1,defaultPageSize:10,pageSizeOptions:[10,20],showSizeChanger:!0,current:t.data&&t.data.page,total:t.searchText?t.filteredData.count:t.data?t.data.total:0},columns:d,dataSource:l,scroll:{y:340},bordered:!0,size:"small",style:{padding:"0 16px"},onChange:n})},q=async t=>L.get("/lesson",{params:{search:t}}),X=()=>{const[t,m]=p.useState(""),[d,l]=p.useState({}),[n,s]=y(),a=n.get("course_id")??"",i=n.get("page")??"1",x=n.get("limit")??"10",{data:o}=u({queryKey:["classes",a,i,x],queryFn:async()=>(await C(a,i,x)).data}),c=u({queryKey:["course",a],queryFn:async()=>(await N(a)).data.data}).data;console.log(c),u({queryKey:["search",t],queryFn:async()=>{const r=await q(String(t).toUpperCase());l(r.data)}}).data;const f=r=>{m(r)},g=S.debounce(r=>{f(r.target.value)},1e3);return e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsxs("div",{className:"max-w-[1280px] mx-auto py-8 grid grid-cols-7 grid-rows-auto gap-4",children:[e.jsx(v,{}),e.jsxs("div",{className:"col-span-6 row-span-4 bg-white dark:bg-[#1E293B] dark:border-none rounded-lg border-[1px] border-solid border-gray-200 overflow-hidden",style:{boxShadow:"0 0 10px rgba(0,0,0,.18)",cursor:"pointer",border:"1px solid rgba(0,0,0,.1)"},children:[e.jsxs("div",{className:"p-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xl text-[#F56A00] font-bold",children:"Lessons List For Teacher"}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Course: ",e.jsx("span",{className:"text-blue-600",children:c&&c.course_code})]}),e.jsxs("p",{className:"m-0 text-sm text-gray-500 mt-2",children:["Total lessons:"," ",e.jsx("span",{className:"text-blue-600",children:t?d.count:o?o.total:0})]})]}),e.jsx(F.Search,{placeholder:"Search Lesson Name ...",style:{width:280},onChange:g,onSearch:g})]}),e.jsx(_,{data:o,searchText:t,setSearchParams:s,filteredData:d,course_id:a})]})]}),e.jsx(w,{})]})};export{X as default};
