import{r as S,A as Me,_ as xe,R as f,h as X,a2 as E,f as Ve,c as _,D as ce,E as De,i as Be,m as Ke,k as Ae,l as ke,a1 as W,j as r,a as Pe,L as ue,B as de}from"./index-7d110911.js";import{S as P,i as qe}from"./index.esm-72942c3c.js";import{T as j,A as Xe,I as We}from"./index-fb2f4293.js";import{S as fe}from"./style-beb2928e.js";import{g as ge}from"./course.api-4e1b7d81.js";import{L as Ge}from"./LevelTag-63a710d8.js";import{g as Ue}from"./lessonsList.api-a0ae6b1b.js";import{h as Qe}from"./http-f102274f.js";import{u as G}from"./useQuery-82c71c59.js";import{C as q}from"./index-44b39aec.js";import{T as Je}from"./index-8418211f.js";import{F as k}from"./index-aff46a20.js";import{u as Ye}from"./useMutation-3aed9725.js";import{n as me}from"./index-3f48a51f.js";import{I as Ze}from"./index-2b0edacf.js";import{C as et}from"./Collapse-f7f6eaae.js";import{B as tt}from"./Breadcrumb-cc32fac8.js";import{R as at,C as ve}from"./row-829469e7.js";import{T as rt}from"./index-38d7445f.js";import{u as he,T as nt}from"./TextArea-c3291115.js";import"./logo-with-shadow-7c6876ad.js";import"./utils-fa248f50.js";import"./PlusOutlined-47ab0ced.js";import"./SearchOutlined-ad45125c.js";import"./DownOutlined-64c7721a.js";var ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const st=ot;var lt=function(a,t){return S.createElement(Me,xe({},a,{ref:t,icon:st}))};const it=S.forwardRef(lt);function ct(e,a){var t=e.disabled,n=e.prefixCls,s=e.character,h=e.characterRender,u=e.index,p=e.count,l=e.value,m=e.allowHalf,y=e.focused,C=e.onHover,v=e.onClick,$=function(R){C(R,u)},F=function(R){v(R,u)},H=function(R){R.keyCode===E.ENTER&&v(R,u)},w=u+1,c=new Set([n]);l===0&&u===0&&y?c.add("".concat(n,"-focused")):m&&l+.5>=w&&l<w?(c.add("".concat(n,"-half")),c.add("".concat(n,"-active")),y&&c.add("".concat(n,"-focused"))):(w<=l?c.add("".concat(n,"-full")):c.add("".concat(n,"-zero")),w===l&&y&&c.add("".concat(n,"-focused")));var I=typeof s=="function"?s(e):s,b=f.createElement("li",{className:X(Array.from(c)),ref:a},f.createElement("div",{onClick:t?null:F,onKeyDown:t?null:H,onMouseMove:t?null:$,role:"radio","aria-checked":l>u?"true":"false","aria-posinset":u+1,"aria-setsize":p,tabIndex:t?-1:0},f.createElement("div",{className:"".concat(n,"-first")},I),f.createElement("div",{className:"".concat(n,"-second")},I)));return h&&(b=h(b,e)),b}const ut=f.forwardRef(ct);function dt(){var e=S.useRef({});function a(n){return e.current[n]}function t(n){return function(s){e.current[n]=s}}return[a,t]}function ft(e){var a=e.pageXOffset,t="scrollLeft";if(typeof a!="number"){var n=e.document;a=n.documentElement[t],typeof a!="number"&&(a=n.body[t])}return a}function mt(e){var a,t,n=e.ownerDocument,s=n.body,h=n&&n.documentElement,u=e.getBoundingClientRect();return a=u.left,t=u.top,a-=h.clientLeft||s.clientLeft||0,t-=h.clientTop||s.clientTop||0,{left:a,top:t}}function vt(e){var a=mt(e),t=e.ownerDocument,n=t.defaultView||t.parentWindow;return a.left+=ft(n),a.left}var ht=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function xt(e,a){var t,n=e.prefixCls,s=n===void 0?"rc-rate":n,h=e.className,u=e.defaultValue,p=e.value,l=e.count,m=l===void 0?5:l,y=e.allowHalf,C=y===void 0?!1:y,v=e.allowClear,$=v===void 0?!0:v,F=e.character,H=F===void 0?"â˜…":F,w=e.characterRender,c=e.disabled,I=e.direction,b=I===void 0?"ltr":I,N=e.tabIndex,R=N===void 0?0:N,pe=e.autoFocus,T=e.onHoverChange,O=e.onChange,z=e.onFocus,M=e.onBlur,V=e.onKeyDown,D=e.onMouseLeave,ye=Ve(e,ht),Ce=dt(),U=_(Ce,2),Se=U[0],be=U[1],B=f.useRef(null),Q=function(){if(!c){var o;(o=B.current)===null||o===void 0||o.focus()}};f.useImperativeHandle(a,function(){return{focus:Q,blur:function(){if(!c){var o;(o=B.current)===null||o===void 0||o.blur()}}}});var je=he(u||0,{value:p}),J=_(je,2),K=J[0],we=J[1],Re=he(null),Y=_(Re,2),Ie=Y[0],A=Y[1],Z=function(o,g){var d=b==="rtl",i=o+1;if(C){var se=Se(o),le=vt(se),ie=se.clientWidth;(d&&g-le>ie/2||!d&&g-le<ie/2)&&(i-=.5)}return i},L=function(o){we(o),O==null||O(o)},$e=f.useState(!1),ee=_($e,2),Fe=ee[0],te=ee[1],Te=function(){te(!0),z==null||z()},He=function(){te(!1),M==null||M()},Ne=f.useState(null),ae=_(Ne,2),re=ae[0],ne=ae[1],Le=function(o,g){var d=Z(g,o.pageX);d!==Ie&&(ne(d),A(null)),T==null||T(d)},oe=function(o){c||(ne(null),A(null),T==null||T(void 0)),o&&(D==null||D(o))},_e=function(o,g){var d=Z(g,o.pageX),i=!1;$&&(i=d===K),oe(),L(i?0:d),A(i?d:null)},Ee=function(o){var g=o.keyCode,d=b==="rtl",i=K;g===E.RIGHT&&i<m&&!d?(C?i+=.5:i+=1,L(i),o.preventDefault()):g===E.LEFT&&i>0&&!d||g===E.RIGHT&&i>0&&d?(C?i-=.5:i-=1,L(i),o.preventDefault()):g===E.LEFT&&i<m&&d&&(C?i+=.5:i+=1,L(i),o.preventDefault()),V==null||V(o)};f.useEffect(function(){pe&&!c&&Q()},[]);var Oe=new Array(m).fill(0).map(function(x,o){return f.createElement(ut,{ref:be(o),index:o,count:m,disabled:c,prefixCls:"".concat(s,"-star"),allowHalf:C,value:re===null?K:re,onClick:_e,onHover:Le,key:x||o,character:H,characterRender:w,focused:Fe})}),ze=X(s,h,(t={},ce(t,"".concat(s,"-disabled"),c),ce(t,"".concat(s,"-rtl"),b==="rtl"),t));return f.createElement("ul",xe({className:ze,onMouseLeave:oe,tabIndex:c?-1:R,onFocus:c?null:Te,onBlur:c?null:He,onKeyDown:c?null:Ee,ref:B,role:"radiogroup"},De(ye,{aria:!0,data:!0,attr:!0})),Oe)}const gt=f.forwardRef(xt),pt=e=>{const{componentCls:a}=e;return{[`${a}-star`]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:`all ${e.motionDurationMid}, outline 0s`,"&:hover":{transform:e.starHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:`${e.lineWidth}px dashed ${e.starColor}`,transform:e.starHoverScale}},"&-first, &-second":{color:e.starBg,transition:`all ${e.motionDurationMid}`,userSelect:"none",[e.iconCls]:{verticalAlign:"middle"}},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},[`&-half ${a}-star-first, &-half ${a}-star-second`]:{opacity:1},[`&-half ${a}-star-first, &-full ${a}-star-second`]:{color:"inherit"}}}},yt=e=>({[`&-rtl${e.componentCls}`]:{direction:"rtl"}}),Ct=e=>{const{componentCls:a}=e;return{[a]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ae(e)),{display:"inline-block",margin:0,padding:0,color:e.starColor,fontSize:e.starSize,lineHeight:"unset",listStyle:"none",outline:"none",[`&-disabled${a} ${a}-star`]:{cursor:"default","> div:hover":{transform:"scale(1)"}}}),pt(e)),{[`+ ${a}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,fontSize:e.fontSize}}),yt(e))}},St=Be("Rate",e=>{const a=Ke(e,{});return[Ct(a)]},e=>({starColor:e.yellow6,starSize:e.controlHeightLG*.5,starHoverScale:"scale(1.1)",starBg:e.colorFillContent}));var bt=globalThis&&globalThis.__rest||function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)a.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]]);return t};const jt=S.forwardRef((e,a)=>{const{prefixCls:t,className:n,rootClassName:s,style:h,tooltips:u,character:p=S.createElement(it,null)}=e,l=bt(e,["prefixCls","className","rootClassName","style","tooltips","character"]),m=(c,I)=>{let{index:b}=I;return u?S.createElement(nt,{title:u[b]},c):c},{getPrefixCls:y,direction:C,rate:v}=S.useContext(ke),$=y("rate",t),[F,H]=St($),w=Object.assign(Object.assign({},v==null?void 0:v.style),h);return F(S.createElement(gt,Object.assign({ref:a,character:p,characterRender:m},l,{className:X(n,s,H,v==null?void 0:v.className),style:w,prefixCls:$,direction:C})))}),wt=jt,Rt=e=>Qe.get("/lesson",{params:{id:e}}),It=()=>{const[e]=k.useForm(),[a]=S.useState(!1),[,t]=S.useState(""),{id:n}=W(),{data:s}=G({queryKey:["lessons",n],queryFn:async()=>(await Ue(n,1,50)).data.data}),{mutate:h}=Ye(Rt,{onSuccess:()=>{me.success({message:"Update successful",description:"The lesson has been updated successfully"}),e.resetFields()},onError:l=>{me.error({message:"Update failed",description:l.message})}}),u=l=>{const{id:m,...y}=l;h({id:m,...y})},p=(s==null?void 0:s.map(l=>({key:l.id,label:l.title,children:r.jsx(r.Fragment,{children:a?r.jsx(k.Item,{noStyle:!0,name:"content",children:r.jsx(Ze.TextArea,{value:l.content,style:{width:"100%",minHeight:"160px"},onChange:m=>{t(m.target.value)}})}):r.jsx(j.Text,{children:l.content})})})))||[];return r.jsx(k,{form:e,onFinish:u,initialValues:{...s},children:r.jsx(et,{items:p,bordered:!1,accordion:!0,children:p==null?void 0:p.map(l=>r.jsxs("div",{children:[r.jsx("div",{className:"w-full",children:l.label}),r.jsx(P,{direction:"vertical",style:{width:"100%"},children:l.children})]},l.key))})})},$t=()=>{const{id:e}=W(),{data:a}=G({queryKey:["course",e],queryFn:async()=>(await ge(e)).data.data}),t=[{key:"1",label:"Description",children:`${a?a.desc:""}`},{key:"2",label:"Contents",children:r.jsx("div",{className:"pb-4",children:r.jsx(It,{})})}];return r.jsx(q,{style:{width:"100%",margin:"0 8px"},children:r.jsx(Je,{defaultActiveKey:"1",items:t,size:"large"})})},Ft=()=>{const{id:e}=W(),a=Pe(),{data:t}=G({queryKey:["courses"],queryFn:async()=>(await ge(e)).data.data});return t?r.jsxs(r.Fragment,{children:[r.jsx(tt,{items:[{title:r.jsx(ue,{to:"/admin",children:"Home"})},{title:r.jsx(ue,{to:"/admin/courses/all",children:"Courses"})},{title:`${t.course_code}: ${t.title}`}],style:{padding:"4px",fontSize:"16px"}}),r.jsxs(q,{children:[r.jsxs(at,{gutter:[16,16],children:[r.jsxs(ve,{span:16,children:[r.jsxs(j.Title,{level:3,className:"mt-0 mx-1",children:[t.course_code,": ",t.title]}),r.jsx(q,{children:r.jsxs(P,{direction:"vertical",children:[r.jsxs(j.Text,{className:"mt-2 mx-1",style:{fontSize:"18px"},children:["Price:"," ",t.discount?r.jsxs(j.Text,{className:"mt-2 mx-1 line-through",style:{fontSize:"18px"},children:[t.price," $"]}):r.jsxs(j.Text,{className:"mt-2 mx-1",style:{fontSize:"18px"},children:[t.price," $"]})," ",t.discount>0&&r.jsxs(r.Fragment,{children:[r.jsxs(j.Text,{strong:!0,className:"mt-2 mx-1",style:{fontSize:"22px"},children:[Math.round((1-t.discount/100)*t.price)," $"]}),r.jsxs(rt,{color:"blue",style:{fontSize:"16px",padding:"4px",margin:"0 4px"},children:["- ",t.discount," %"]})]})]}),r.jsxs(j.Text,{className:"mt-2 mx-1",style:{fontSize:"18px"},children:["Level:"," ",r.jsx(Ge,{level:t.level,style:{fontSize:"16px",padding:"4px 8px",margin:"0px 8px"}})]}),r.jsxs(j.Text,{className:"mt-2 mx-1",style:{fontSize:"18px"},children:["Sessions per course: ",t.session_per_course]}),r.jsx(wt,{disabled:!0,character:r.jsx(qe,{className:"text-[24px]"}),value:t.rate})]})})]}),r.jsx(ve,{span:8,children:r.jsx(We,{src:t.image&&t.image.length>0?t.image:"https://via.placeholder.com/500x250",alt:t.title})}),r.jsx($t,{})]}),r.jsxs(P,{size:"middle",style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:[r.jsx(de,{type:"default",style:fe,onClick:()=>a("/admin/courses/all"),children:"Back"}),r.jsx(de,{type:"primary",style:fe,onClick:()=>a(`/admin/courses/edit/${e}`),children:"Edit"})]})]})]}):r.jsx(j.Text,{children:"Course not found"})},ea=()=>r.jsx(Xe,{content:r.jsx(Ft,{})});export{ea as default};
