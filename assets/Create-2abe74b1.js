import{j as e,a as T,b as k,r as n,L as p,B as h}from"./index-363e3ed7.js";import{a as N,c as E}from"./customParseFormat-8151b72c.js";import{A as M,T as A}from"./index-bf24e54d.js";import{h as D}from"./http-f102274f.js";import{s as O,g as Y}from"./searchWorkplaceForAdmin-178e7373.js";import{g as L}from"./coursesList.api-347599cc.js";import{g as W}from"./course.api-4e1b7d81.js";import{w as R}from"./day-4b2aa78a.js";import{F as t}from"./index-6cc34bf2.js";import{u as U}from"./useMutation-023982ef.js";import{u as i}from"./useQuery-6d2d25c4.js";import{B as K}from"./Breadcrumb-43c879c8.js";import{C as V}from"./index-b91b8127.js";import{R as z,C as x}from"./row-a1d900f4.js";import{S as l}from"./index-8484ea22.js";import{D as y}from"./index-ebc01c55.js";import{I as j}from"./index-4daa5f9f.js";import{S as B}from"./index.esm-6c83b20a.js";import{n as g}from"./index-0a87366a.js";import"./logo-with-shadow-ac30bca6.js";import"./TextArea-bdb83b3b.js";import"./utils-dec5ad5f.js";import"./DownOutlined-860a4c38.js";import"./index-25cd65cf.js";import"./PlusOutlined-b3cabe21.js";import"./SearchOutlined-c83a2012.js";const G=async a=>D.post("/class",a);N.extend(E);const H=()=>{const[a]=t.useForm(),u=T(),[d]=k(),m=d.get("page")??1,c=d.get("limit")??50,[o,f]=n.useState(void 0),[C,b]=n.useState(void 0),[S,v]=n.useState([]),q=s=>{v(s)},{mutate:w,isLoading:F}=U(G,{onSuccess:()=>{g.success({message:"Update successful",description:"The class has been updated successfully"}),a.resetFields(),u("/admin/classes/all")},onError:s=>{g.error({message:"Update failed",description:s.message})}}),{data:_}=i({queryKey:["courses",m,c],queryFn:async()=>(await L()).data.data}),{data:r}=i({queryKey:["courseById",o],queryFn:async()=>(await W(o)).data.data,enabled:!!o}),{data:I}=i({queryKey:["workplaces"],queryFn:async()=>(await O("ON")).data.data}),{data:P}=i({queryKey:["MENTOR",m,c],queryFn:async()=>(await Y("MENTOR",m,c)).data.data});return n.useEffect(()=>{a==null||a.setFieldValue("total_session",r==null?void 0:r.session_per_course)},[r,a]),e.jsxs(e.Fragment,{children:[e.jsx(K,{items:[{title:e.jsx(p,{to:"/admin",children:"Home"})},{title:e.jsx(p,{to:"/admin/classes/all",children:"Classes"})},{title:"Create"}],style:{padding:"4px",fontSize:"16px"}}),e.jsx(V,{children:e.jsxs(t,{form:a,onFinish:w,layout:"vertical",initialValues:{total_session:r==null?void 0:r.session_per_course},children:[e.jsx(A.Title,{level:3,className:"mt-0 mx-1",children:"Create A New Class"}),e.jsxs(z,{gutter:[24,16],children:[e.jsxs(x,{xs:24,lg:12,children:[e.jsx(t.Item,{label:"Course",name:"course_id",rules:[{required:!0,message:"Please enter the course name"}],children:e.jsx(l,{options:(_||[]).map(s=>({value:s._id,label:s.title})),value:o,onChange:s=>f(s),placeholder:"Select",showSearch:!0})}),e.jsx(t.Item,{label:"Mentor",name:"mentor_id",rules:[{required:!0,message:"Please enter the mentor"}],children:e.jsx(l,{options:(P||[]).map(s=>({value:s._id,label:s.fullname})),placeholder:"Select",showSearch:!0})}),e.jsx(t.Item,{label:"Start Date",name:"start_at",rules:[{required:!0,message:"Please enter the start date"}],children:e.jsx(y,{style:{width:"100%"},format:"DD/MM/YYYY"})}),e.jsx(t.Item,{label:"Total Sessions",name:"total_session",rules:[{required:!0,message:"Please enter the total sessions"}],children:e.jsx(j,{style:{width:"100%"},placeholder:"Type..."})}),e.jsx(t.Item,{label:"Class Status",name:"status",rules:[{required:!0,message:"Please select the status"}],children:e.jsx(l,{options:[{label:"INACTIVE",value:"OFF"},{label:"ACTIVE",value:"ON"},{label:"UPCOMING",value:"UPCOMING"}],placeholder:"Select"})})]}),e.jsxs(x,{xs:24,lg:12,children:[e.jsx(t.Item,{label:"Facility",name:"workplace_id",rules:[{required:!0,message:"Please enter the facility"}],children:e.jsx(l,{options:(I||[]).map(s=>({value:s._id,label:s.name})),value:C,onChange:s=>b(s),showSearch:!0})}),e.jsx(t.Item,{label:"Schedule",name:"schedule",rules:[{required:!0,message:"Please enter the schedule"}],children:e.jsx(l,{mode:"multiple",placeholder:"Select weekdays",value:S,onChange:q,maxTagCount:"responsive",children:R.map(s=>e.jsx(l.Option,{value:s.value,children:s.label},s.value))})}),e.jsx(t.Item,{label:"Expected End Date",name:"end_at",rules:[{required:!0,message:"Please enter the expected end date"}],children:e.jsx(y,{style:{width:"100%"},format:"DD/MM/YYYY"})}),e.jsx(t.Item,{label:"Number of Students",name:"class_size",rules:[{required:!0,message:"Please enter the number of students"}],children:e.jsx(j,{style:{width:"100%"},placeholder:"Type..."})})]})]}),e.jsx(t.Item,{children:e.jsxs(B,{size:"middle",style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(h,{type:"default",onClick:()=>u("/admin/classes/all"),children:"Cancel"}),e.jsx(h,{type:"primary",htmlType:"submit",loading:F,children:"Create"})]})})]})})]})},be=()=>e.jsx(M,{content:e.jsx(H,{})});export{be as default};
